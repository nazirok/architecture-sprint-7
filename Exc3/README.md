## Описание взаимодействия
В системе уже есть функиональность управления умным домом. За это отвечает группа сервисов ЖКУ. Новые устройства "интеллектуальный домофон" и "интелектуальный шлагбаум" нужно интегрировать в этот сервис. Взаимодействие с новыми приборами будет осуществлять внешний сервис. Внешний сервис будует взаимодействовать с сервисами ЖКУ для авторизации пользователей и идентификации машин. Сервис ЖКУ отвечающий за функционал умного дома будет взаимодействовать с внешний сервисом для управления приборами.

## Аутентификация и авторизация

1. Аутентификация через мобильное приложение. Аутентификация двухфакторная. Первый фактор логин и пароль. Второй фактор OTP(по пушу или емаил, правда согласно схеме нет интеграции с внешними SMTP или PUSH сервисами) или TOTP. 
2. Ааторизация собственников при работе через мобильное приложение. Каждый пользователь должен иметь доступ только к тем функциям которые нужны. Если у пользователей может быть разный набор функций то разграничение доступа нужно сделать н основе ролевой модели.
3. Для безопасного взаимодействие сервисов ЖКУ и внешниих сервисов умного дома между собой лучше использовать API ключи. Пример внешний сервис получает от домофона фото с лицом. Распознает и формирует данные. По этим данным отправляется запрос в сервис ЖКУ. Там производится идентификация пользователя и дается ответ разрешен вход или нет. Также с номером автомобиля. 

## Требования к безопасности
1. Всю взаимодействие(между сервисами, устройств и сервисами, через мобильное приложение) должно осуществляться через шифрованный канал. Стандарт TLS. 
2. Шифрование персональных данных
3. Мониторинг
4. Ротирование API ключей и ключей шифрования